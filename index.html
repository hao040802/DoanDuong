<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bốc Lá Bài Tình Cảm 💖</title>
<style>
  :root{
    --card-w: 300px;
    --card-h: 420px;
    --accent: #00bcd4;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    font-family: "Segoe UI", Tahoma, Arial, sans-serif;
    background: linear-gradient(120deg,#fbc2eb,#a6c1ee);
    overflow:hidden;
  }
  h1{color:#6a0572;margin:10px 0 18px;text-align:center}
  /* card area */
  .card-container{
    width:var(--card-w);
    height:var(--card-h);
    perspective:1200px;
    position:relative;
    z-index:3;
  }
  .card{
    width:100%;
    height:100%;
    position:relative;
    transform-style:preserve-3d;
    transition: transform 900ms cubic-bezier(.2,.8,.2,1);
    cursor:pointer;
  }
  .card.flipped{ transform: rotateY(180deg); }
  .card-face{
    position:absolute;
    inset:0;
    border-radius:14px;
    backface-visibility:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:22px;
    box-shadow:0 14px 30px rgba(0,0,0,0.15);
    font-size:1.05rem;
    text-align:center;
    line-height:1.4;
  }
  .card-back{
    background: linear-gradient(145deg,#00c3ff,#28f0ff);
    border:4px solid rgba(0,120,138,0.9);
    color:white;
    font-weight:700;
    transform: rotateY(0deg);
  }
  .card-front{
    background: white;
    border:4px solid var(--accent);
    color:#123;
    transform: rotateY(180deg);
    display:flex;
    flex-direction:column;
    justify-content:center;
  }
  .card-front .title{
    color:var(--accent);
    font-weight:700;
    margin-bottom:10px;
    font-size:1.1rem;
  }
  .card-front .text{
    font-size:1rem;
    padding:0 6px;
  }

  /* shuffle animation (small rocking) */
  @keyframes rock {
    0% { transform: translateY(0) rotate(0); }
    25% { transform: translateY(-6px) rotate(3deg); }
    50% { transform: translateY(0) rotate(-3deg); }
    75% { transform: translateY(-4px) rotate(2deg); }
    100% { transform: translateY(0) rotate(0); }
  }
  .shuffling { animation: rock 850ms ease-in-out 3; }

  /* button */
  #drawBtn{
    margin-top:16px;
    padding:10px 18px;
    border:0;
    border-radius:22px;
    background:linear-gradient(90deg,#ff7eb9,#ff5194);
    color:white;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(255,82,148,0.18);
    z-index:3;
  }
  #drawBtn:disabled{opacity:.6;cursor:default}
  #resetBtn{
    margin-left:10px;
    padding:8px 12px;border-radius:18px;border:0;background:#00bcd4;color:#fff;font-weight:600;cursor:pointer;
  }

  /* Snoopy */
  .snoopy{
    position:absolute;
    width:100px;
    height:auto;
    z-index:2;
    pointer-events:none;
    will-change:transform;
    filter:drop-shadow(0 6px 8px rgba(0,0,0,0.15));
  }

  /* small screens */
  @media (max-width:640px){
    :root{ --card-w: 240px; --card-h: 340px; }
    .snoopy{ width:72px; }
  }
</style>
</head>
<body>

  <h1>Bốc Lá Bài Tình Cảm 💖</h1>

  <div class="card-container" aria-hidden="false">
    <div class="card" id="card">
      <div class="card-face card-back" id="cardBack">💙</div>

      <div class="card-face card-front" id="cardFront">
        <div class="title">Lá Câu Hỏi</div>
        <div class="text" id="cardText">Nhấn "Rút Lá Bài" để khám phá một câu hỏi.</div>
      </div>
    </div>
  </div>

  <div style="display:flex;gap:8px;align-items:center;z-index:3">
    <button id="drawBtn">✨ Rút Lá Bài</button>
    <button id="resetBtn" title="Reset bộ bài">🔁 Reset</button>
  </div>

  <!-- Snoopy elements (đặt images/snoopy1.gif ... trong repo của bạn) -->
  <img class="snoopy" id="snoopy1" src="images/snoopy 1.gif" alt="snoopy1">
  <img class="snoopy" id="snoopy2" src="images/snoopy 2.gif" alt="snoopy2">
  <img class="snoopy" id="snoopy3" src="images/snoopy 3.gif" alt="snoopy3">
  <img class="snoopy" id="snoopy4" src="images/snoopy 4.gif" alt="snoopy4">
  <img class="snoopy" id="snoopy5" src="images/snoopy 5.gif" alt="snoopy5">
  <img class="snoopy" id="snoopy6" src="images/snoopy 6.gif" alt="snoopy6">

<script>
/* =========================
   1) Mảng 200 câu hỏi (mảng duy nhất)
   ========================= */
const questions = [
  "Lần hẹn hò nào của chúng ta mà em/anh nhớ rõ nhất từng chi tiết?",
  "Có điều gì em/anh từng ngại nói nhưng sau này đã dám chia sẻ với đối phương?",
  "Nếu được quay lại một ngày bên nhau, em/anh sẽ chọn ngày nào?",
  "Khoảnh khắc nào em/anh nhận ra “mình thực sự yêu người này”?",
  "Hình ảnh nào của đối phương mà em/anh không bao giờ quên?",
  "Khi em/anh gặp áp lực, điều gì từ đối phương khiến em/anh thấy nhẹ nhõm hơn?",
  "Có điều gì em/anh nghĩ đối phương chưa hiểu hết về mình?",
  "Khi thấy đối phương buồn, em/anh thường làm gì trước tiên?",
  "Em/anh cảm thấy an toàn nhất khi nào ở bên người yêu?",
  "Có thói quen hoặc câu nói nào của đối phương mà em/anh thấy rất 'riêng' và đặc biệt?",
  "Món ăn nào khiến em/anh nhớ đến đối phương ngay lập tức?",
  "Bài hát hoặc giai điệu nào làm em/anh liên tưởng đến chúng ta?",
  "Có mùi hương nào em/anh nhớ về người yêu?",
  "Cử chỉ nhỏ nào của đối phương mà em/anh cực kỳ thích?",
  "Màu sắc nào em/anh thấy giống tính cách của người yêu?",
  "Nếu có 1 năm không phải lo tiền bạc, em/anh muốn cùng đối phương làm gì?",
  "Có hoạt động mới nào em/anh muốn hai đứa thử chung?",
  "Nếu viết một 'bucket list' cho tình yêu của chúng ta, em/anh sẽ ghi gì đầu tiên?",
  "Em/anh muốn cùng người yêu trải qua lễ hội hoặc sự kiện nào nhất?",
  "Ngôi nhà trong mơ của em/anh sẽ như thế nào nếu hai đứa sống chung?",
  "Nếu phải miêu tả đối phương bằng 3 từ, em/anh sẽ chọn từ nào?",
  "Điều gì ở đối phương khiến em/anh muốn cố gắng mỗi ngày?",
  "Nếu viết một lá thư cho người yêu 10 năm sau, em/anh sẽ viết gì?",
  "Có điều gì em/anh chưa từng nói nhưng rất muốn đối phương biết?",
  "Khi nghĩ đến 'chúng ta', em/anh thấy tương lai mình tươi đẹp ra sao?",
  "Món ăn nào khiến em/anh nhớ đến người yêu ngay lập tức?",
  "Bài hát hoặc giai điệu nào làm em/anh liên tưởng đến chúng ta?",
  "Mùi hương nào khiến em/anh nhớ về người yêu?",
  "Màu sắc nào em/anh thấy giống tính cách của người yêu?",
  "Có hành động nhỏ nào của người yêu khiến em/anh cảm động không?",
  "Một từ duy nhất để miêu tả ánh mắt người yêu là gì?",
  "Vật dụng nhỏ nào của người yêu khiến em/anh muốn giữ lại mãi?",
  "Lần nào tin nhắn của người yêu khiến em/anh bật cười ngay lập tức?",
  "Nếu tặng người yêu một món đồ tự tay làm, em/anh sẽ làm gì?",
  "Có cử chỉ nào của người yêu mà em/anh thấy cực kỳ đáng yêu?",
  "Một câu nói của người yêu mà em/anh nhớ lâu nhất?",
  "Lúc nào em/anh thấy người yêu đẹp nhất?",
  "Nếu người yêu là một loại đồ uống, em/anh nghĩ đó là gì?",
  "Có khoảnh khắc nào người yêu làm điều nhỏ nhưng khiến em/anh xúc động?",
  "Nét tính cách nào của người yêu khiến em/anh tự hào nhất?",
  "Có biệt danh nào em/anh muốn gọi riêng cho người yêu không?",
  "Khi nhìn người yêu ngủ, em/anh nghĩ gì?",
  "Có dáng vẻ nào của người yêu khiến em/anh muốn chụp lại ngay?",
  "Nếu mô tả người yêu bằng một mùa trong năm, em/anh chọn mùa nào?",
  "Hành động chăm sóc nhỏ nào của người yêu khiến em/anh nhớ mãi?",
  "Điều gì em/anh mong người yêu thay đổi để mối quan hệ tốt hơn?",
  "Thói quen nào em/anh muốn duy trì cùng người yêu lâu dài?",
  "Có hoạt động nào em/anh muốn hai đứa làm thường xuyên hơn?",
  "Em/anh mong nhận được nhiều hơn điều gì từ người yêu?",
  "Em/anh muốn hai đứa nói chuyện với nhau nhiều hơn về chủ đề gì?",
  "Nếu có thể dành một ngày chỉ để làm điều em/anh muốn với người yêu, đó sẽ là gì?",
  "Em/anh muốn cùng người yêu trải nghiệm điều mới nào trong năm nay?",
  "Có chuyến đi nào em/anh muốn lập kế hoạch ngay bây giờ không?",
  "Em/anh muốn hai đứa chia sẻ với nhau nhiều hơn về điều gì?",
  "Em/anh mong người yêu hiểu rõ hơn về khía cạnh nào của mình?",
  "Nếu mối quan hệ này như một ngôi nhà, em/anh muốn trang trí thêm điều gì?",
  "Em/anh muốn học kỹ năng gì để cùng người yêu áp dụng?",
  "Có hoạt động nào em/anh nghĩ sẽ làm chúng ta gần nhau hơn?",
  "Nếu đặt mục tiêu cho tình yêu, mục tiêu đó là gì?",
  "Em/anh muốn hai đứa có một 'truyền thống' riêng không?",
  "Em/anh muốn thay đổi cách hai đứa giải quyết mâu thuẫn như thế nào?",
  "Nếu chỉ còn 1 tháng ở bên nhau, em/anh muốn làm gì nhất?",
  "Em/anh mong người yêu hỗ trợ mình trong điều gì nhất?",
  "Em/anh muốn cả hai học cách gì để duy trì tình cảm lâu dài?",
  "Có điều gì em/anh nghĩ hai đứa cần thử ngay để hiểu nhau hơn?",
  "Khi cãi nhau, điều gì khiến em/anh bình tĩnh lại nhanh nhất?",
  "Có cách nào em/anh muốn áp dụng để giảm hiểu lầm giữa hai đứa?",
  "Khi em/anh giận, người yêu nên làm gì trước?",
  "Điều gì khiến em/anh cảm thấy khó tha thứ?",
  "Em/anh thường mất bao lâu để nguôi giận?",
  "Khi bất đồng ý kiến, em/anh muốn người yêu lắng nghe hay phản hồi ngay?",
  "Có điều gì em/anh từng hiểu lầm người yêu mà sau này thấy khác?",
  "Khi xa nhau lâu, điều gì em/anh nhớ nhất?",
  "Người yêu từng làm điều gì khiến em/anh rất bất ngờ (tích cực)?",
  "Có điều gì em/anh muốn học cách kiên nhẫn hơn với người yêu?",
  "Khi gặp áp lực bên ngoài, em/anh muốn người yêu hỗ trợ thế nào?",
  "Có chuyện gì hai đứa đã vượt qua khiến em/anh tự hào nhất?",
  "Em/anh cảm thấy thế nào khi người yêu nhận lỗi trước?",
  "Nếu người yêu lỡ làm em/anh buồn, điều gì sẽ giúp tha thứ nhanh nhất?",
  "Có giới hạn nào trong mối quan hệ mà em/anh muốn bảo vệ?",
  "Khi mệt mỏi, em/anh muốn người yêu im lặng hay trò chuyện?",
  "Có dấu hiệu nào giúp em/anh biết rằng mối quan hệ đang cần chăm sóc?",
  "Em/anh muốn hai đứa tránh kiểu tranh cãi nào nhất?",
  "Người yêu từng giúp em/anh nhận ra điều gì về bản thân?",
  "Nếu có 'luật vàng' trong tình yêu, em/anh sẽ đặt luật gì?",
  "Em/anh tưởng tượng 5 năm nữa chúng ta sẽ sống ở đâu?",
  "Ngôi nhà mơ ước của em/anh như thế nào?",
  "Em/anh muốn cùng người yêu nuôi con vật gì?",
  "Có thành phố hoặc quốc gia nào em/anh muốn cùng người yêu khám phá?",
  "Trong tương lai, vai trò của em/anh trong gia đình sẽ là gì?",
  "Em/anh muốn có bao nhiêu con?",
  "Công việc mơ ước của em/anh là gì?",
  "Em/anh muốn chúng ta duy trì sở thích chung nào lâu dài?",
  "Nếu một ngày hai đứa cùng nghỉ hưu, em/anh muốn làm gì?",
  "Em/anh muốn kỷ niệm 10 năm yêu nhau như thế nào?",
  "Có 'ước mơ điên rồ' nào em/anh muốn thử cùng người yêu?",
  "Em/anh nghĩ chúng ta sẽ già đi như thế nào?",
  "Có điều gì em/anh muốn học để chuẩn bị cho tương lai cùng nhau?",
  "Em/anh muốn dành kỳ nghỉ trăng mật ở đâu?",
  "Điều gì em/anh nghĩ sẽ thay đổi sau khi cưới?",
  "Có phong cách sống nào em/anh muốn hai đứa theo đuổi?",
  "Em/anh muốn cùng người yêu xây dựng điều gì cho cộng đồng?",
  "Trong tương lai, điều gì em/anh mong vẫn giữ nguyên?",
  "Em/anh muốn chúng ta có thói quen gì khi về già?",
  "Có lời hứa nào em/anh muốn cùng nhau giữ đến cuối đời?",
  "Nếu được sống ở một quốc gia khác 1 năm, em/anh sẽ chọn nơi nào?",
  "Nếu chỉ còn một tuần để sống, em/anh sẽ làm gì?",
  "Nếu trúng số 10 tỷ, em/anh sẽ tiêu như thế nào?",
  "Nếu được quay lại một thời điểm trong quá khứ, em/anh sẽ chọn khi nào?",
  "Nếu có thể thay đổi một điều trong tính cách của mình, đó sẽ là gì?",
  "Nếu được làm lại ngày đầu gặp nhau, em/anh sẽ làm gì khác?",
  "Nếu một ngày tỉnh dậy và ở thời thơ ấu, em/anh sẽ tìm người yêu thế nào?",
  "Nếu chúng ta là nhân vật trong phim, đó sẽ là thể loại gì?",
  "Nếu có thể đổi nghề ngay lập tức, em/anh sẽ chọn nghề gì?",
  "Nếu hai đứa có 24h không bị ai làm phiền, em/anh sẽ làm gì?",
  "Nếu phải sống ở một hòn đảo hoang, em/anh muốn mang theo gì?",
  "Nếu em/anh là siêu anh hùng, sức mạnh đặc biệt sẽ là gì?",
  "Nếu người yêu là một bài hát, đó sẽ là bài nào?",
  "Nếu hai đứa mở một quán café, nó sẽ trông như thế nào?",
  "Nếu được đi du lịch miễn phí cả đời, em/anh muốn bắt đầu ở đâu?",
  "Nếu đổi vai trò cho nhau một ngày, em/anh sẽ làm gì?",
  "Nếu em/anh là một món ăn, đó sẽ là món gì?",
  "Nếu hai đứa viết sách về chuyện tình, tiêu đề sẽ là gì?",
  "Nếu được chọn siêu năng lực cho người yêu, em/anh sẽ chọn gì?",
  "Nếu hai đứa có thể xóa một ký ức buồn, đó sẽ là gì?",
  "Điều gì khiến em/anh cảm thấy được yêu nhất?",
  "Có ký ức nào em/anh giữ kín chỉ cho người yêu biết?",
  "Điều gì khiến em/anh cảm thấy yếu đuối nhất?",
  "Em/anh tự tin nhất ở điểm nào của bản thân?",
  "Có điều gì em/anh lo sợ trong mối quan hệ này?",
  "Khi nghĩ đến hạnh phúc, hình ảnh nào hiện lên đầu tiên?",
  "Điều gì khiến em/anh mất niềm tin?",
  "Có khi nào em/anh thấy khó chia sẻ cảm xúc?",
  "Lời khen nào từ người yêu làm em/anh nhớ mãi?",
  "Em/anh thường làm gì khi cảm thấy cô đơn?",
  "Điều gì khiến em/anh cảm thấy bình yên nhất?",
  "Có ký ức tuổi thơ nào định hình tính cách em/anh hôm nay?",
  "Khi thất bại, điều gì giúp em/anh đứng dậy?",
  "Có điều gì em/anh chưa bao giờ nói với ai ngoài người yêu?",
  "Em/anh thấy bản thân thay đổi thế nào khi yêu?",
  "Khi buồn, em/anh muốn ở một mình hay cần người bên cạnh?",
  "Điều gì khiến em/anh cảm thấy may mắn nhất trong tình yêu này?",
  "Có ký ức nào khiến em/anh muốn rơi nước mắt khi nhớ lại?",
  "Khi tự hào về bản thân, em/anh muốn chia sẻ với ai đầu tiên?",
  "Có bí mật nhỏ nào em/anh vẫn giữ cho riêng mình?",
  "Nếu viết một lá thư cho người yêu, câu mở đầu sẽ là gì?",
  "Có điều gì em/anh muốn nói lời cảm ơn ngay lúc này?",
  "Điều gì em/anh muốn xin lỗi người yêu nhất?",
  "Nếu chỉ có thể nói 3 câu với người yêu hôm nay, đó sẽ là gì?",
  "Lời hứa nào em/anh muốn thực hiện trong năm nay?",
  "Điều gì khiến em/anh cảm thấy may mắn khi gặp người yêu?",
  "Nếu tặng người yêu một bài hát, đó sẽ là bài nào?",
  "Có câu nói nào em/anh muốn nghe từ người yêu mỗi ngày?",
  "Nếu được dành một lời chúc cho người yêu, đó sẽ là gì?",
  "Có điều gì em/anh chưa từng nói nhưng luôn muốn người yêu biết?",
  "Khi nghĩ về tương lai, em/anh muốn hình ảnh nào xuất hiện?",
  "Lời nhắn nào em/anh muốn để lại nếu mai không thể gặp nhau?",
  "Nếu có thể dành 5 phút ôm người yêu, em/anh sẽ nghĩ gì?",
  "Câu “em/anh yêu anh/em” đối với em/anh nghĩa là gì?",
  "Em/anh muốn người yêu nhớ điều gì về mình nhất?",
  "Nếu được nói một điều cuối cùng trong đời cho người yêu, đó sẽ là gì?",
  "Có câu nói nào của người yêu khiến em/anh thay đổi cuộc đời?",
  "Khi nhắm mắt và nghĩ về tình yêu này, hình ảnh nào xuất hiện?",
  "Em/anh muốn kết thúc câu chuyện tình yêu của mình như thế nào?",
  "Nếu sau này gặp lại kiếp sau, điều gì em/anh muốn vẫn giữ nguyên?"
];

/* =========================
   2) Deck logic: shuffle và rút (không lặp cho đến khi hết)
   ========================= */
let deck = [];
function resetDeck(){
  deck = [...questions];
  shuffle(deck);
}
function shuffle(array){
  // Fisher-Yates
  for(let i = array.length -1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
resetDeck();

/* UI refs */
const card = document.getElementById('card');
const cardText = document.getElementById('cardText');
const drawBtn = document.getElementById('drawBtn');
const resetBtn = document.getElementById('resetBtn');

/* draw flow: soft shuffle animation -> flip to show question -> enable button */
let busy = false;
drawBtn.addEventListener('click', () => {
  if (busy) return;
  busy = true;
  drawBtn.disabled = true;

  // 1) gentle shake to simulate shuffle
  card.classList.add('shuffling');

  // after shuffling animation
  setTimeout(() => {
    card.classList.remove('shuffling');

    // ensure deck has cards
    if (deck.length === 0) resetDeck();

    // shuffle deck again before drawing for realism
    shuffle(deck);

    // pop one card (top of deck)
    const q = deck.pop();

    // show back (face-down), remove flipped if any
    card.classList.remove('flipped');

    // small pause so it feels like dealing
    setTimeout(() => {
      // set text, then flip
      cardText.textContent = q;
      card.classList.add('flipped');

      // keep it visible for a while, then allow next draw
      setTimeout(() => {
        busy = false;
        drawBtn.disabled = false;
      }, 1200);
    }, 260);
  }, 900);
});

/* Reset deck button */
resetBtn.addEventListener('click', () => {
  resetDeck();
  cardText.textContent = "Nhấn 'Rút Lá Bài' để khám phá một câu hỏi.";
  card.classList.remove('flipped');
});

/* =========================
   3) Snoopy movement: simple soft wandering for each image
   ========================= */
const snoopys = Array.from(document.querySelectorAll('.snoopy'));
const vw = () => Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
const vh = () => Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);

// create state for each snoopy
const sprites = snoopys.map((el, i) => {
  // initial pos random inside viewport padded
  const pad = 60;
  const x = Math.random()*(vw()-pad*2)+pad;
  const y = Math.random()*(vh()-pad*2)+pad;
  // velocity small random
  const vx = (Math.random()*0.6 + 0.2) * (Math.random()<0.5 ? -1 : 1);
  const vy = (Math.random()*0.6 + 0.2) * (Math.random()<0.5 ? -1 : 1);
  el.style.transform = `translate(${x}px, ${y}px)`;
  return {el,x,y,vx,vy};
});

let lastTime = performance.now();
function animateSprites(t){
  const dt = Math.min(40, t - lastTime) / 16; // normalize
  lastTime = t;
  const pad = 20;
  const width = vw();
  const height = vh();
  sprites.forEach(s => {
    s.x += s.vx * dt;
    s.y += s.vy * dt;

    // bounce on edges
    if (s.x < pad){ s.x = pad; s.vx *= -1; }
    if (s.y < pad){ s.y = pad; s.vy *= -1; }
    if (s.x > width - pad - 100){ s.x = width - pad - 100; s.vx *= -1; }
    if (s.y > height - pad - 100){ s.y = height - pad - 100; s.vy *= -1; }

    // tiny random walk change
    if (Math.random() < 0.01) s.vx += (Math.random()-0.5)*0.4;
    if (Math.random() < 0.01) s.vy += (Math.random()-0.5)*0.4;

    // limit speed
    s.vx = Math.max(-1.2, Math.min(1.2, s.vx));
    s.vy = Math.max(-1.2, Math.min(1.2, s.vy));

    s.el.style.transform = `translate(${s.x}px, ${s.y}px)`;
  });
  requestAnimationFrame(animateSprites);
}
requestAnimationFrame(animateSprites);

/* keep sprites in viewport on resize */
window.addEventListener('resize', () => {
  sprites.forEach(s => {
    s.x = Math.min(s.x, vw() - 120);
    s.y = Math.min(s.y, vh() - 120);
  });
});
</script>

</body>
</html>
